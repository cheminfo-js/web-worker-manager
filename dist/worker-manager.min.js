// worker-manager@v0.0.2, MIT licensed. https://github.com/cheminfo-js/worker-manager
!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.WorkerManager=t()}}(function(){return function t(e,r,n){function i(s,a){if(!r[s]){if(!e[s]){var f="function"==typeof require&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};e[s][0].call(c.exports,function(t){var r=e[s][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e,r){"use strict";function n(){}function i(t,e){if("function"!=typeof t)throw new TypeError("func argument must be a function");if(void 0===e&&(e={}),"object"!=typeof e||null===e)throw new TypeError("options argument must be an object");this._workerCode=t.toString(),this._numWorkers=e.maxWorkers>0?Math.min(e.maxWorkers,s):s,this._workers=new Array(this._numWorkers),this._timeout=e.timeout||0,this._terminateOnError=!!e.terminateOnError;var r=e.deps;"string"==typeof r&&(r=[r]),Array.isArray(r)||(r=void 0),this._id=0,this._terminated=!1,this._working=0,this._waiting=[],this._callbacks={},this._init(r)}var o=t("./workerTemplate"),s=navigator.hardwareConcurrency||1;i.prototype._init=function(t){for(var e=o.newWorkerURL(this._workerCode),r=0;r<this._numWorkers;r++){var n=new Worker(e);n.postMessage({action:"init",deps:t}),n.onmessage=this._onmessage.bind(this,n),n.onerror=this._onerror.bind(this,n),n.running=!1,this._workers[r]=n}URL.revokeObjectURL(e)},i.prototype._onerror=function(t,e){this._terminated||(this._working--,t.running=!1,this._terminateOnError?this.terminate():this._exec())},i.prototype._onmessage=function(t,e){this._terminated||(this._working--,this._callbacks[e.data.id]&&(this._callbacks[e.data.id](null,e.data.data),delete this._callbacks[e.data.id],t.running=!1),this._exec())},i.prototype._exec=function(){if(this._working!==this._numWorkers&&0!==this._waiting.length)for(var t=0;t<this._numWorkers;t++)if(!this._workers[t].running){var e=this._id++,r=this._waiting.shift(),i=this._workers[t];i.postMessage({action:"exec",id:e,event:r[0],args:r[1]}),i.running=!0,i.time=Date.now(),this._callbacks[e]=r[2]||n,this._working++;break}},i.prototype.terminate=function(){if(!this._terminated){for(var t=0;t<this._numWorkers;t++)this._workers[t].terminate();this._terminated=!0}},i.prototype.postAll=function(t,e){if(this._terminated)throw new Error("Cannot post (terminated)");e=e||[],Array.isArray(e)||(e=[e]);for(var r=0;r<this._numWorkers;r++)this._workers[r].postMessage({action:"exec",event:t,args:e})},i.prototype.post=function(t,e,r){if(this._terminated)throw new Error("Cannot post (terminated)");"function"==typeof e?(r=e,e=[]):Array.isArray(e)||(e=[e]),this._waiting.push([t,e,r]),this._exec()},e.exports=i},{"./workerTemplate":2}],2:[function(t,e,r){"use strict";var n=function(){function t(){this._listeners={}}self.window=self,t.prototype.on=function(t,e){if(this._listeners[t])throw new RangeError("there is already a listener for "+t);if("function"!=typeof e)throw new TypeError("callback argument must be a function");this._listeners[t]=e},t.prototype._send=function(t,e){self.postMessage({id:t,data:e})},t.prototype._trigger=function(t,e){if(!this._listeners[t])throw new Error("event "+t+" is not defined");this._listeners[t].apply(null,e)};var e=new t;self.onmessage=function(t){switch(t.data.action){case"init":t.data.deps&&importScripts.apply(self,t.data.deps);break;case"exec":t.data.args.unshift(function(r){e._send(t.data.id,r)}),e._trigger(t.data.event,t.data.args);break;case"ping":e.send(t.data.id,"pong")}}},i=n.toString().split('(("CODE"))');r.newWorkerURL=function(t){var e=new Blob(["(",i[0],"(",t,")();",i[1],")();"],{type:"application/javascript"});return URL.createObjectURL(e)}},{}]},{},[1])(1)});
//# sourceMappingURL=worker-manager.min.js.map