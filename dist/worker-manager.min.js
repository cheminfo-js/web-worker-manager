// worker-manager@v0.0.1, MIT licensed. https://github.com/cheminfo-js/worker-manager
!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.WorkerManager=e()}}(function(){return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var f="function"==typeof require&&require;if(!a&&f)return f(s,!0);if(o)return o(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var p=r[s]={exports:{}};t[s][0].call(p.exports,function(e){var r=t[s][1][e];return i(r?r:e)},p,p.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){"use strict";function n(){}function i(e,t){if("function"!=typeof e)throw new TypeError("func argument must be a function");if(void 0===t&&(t={}),"object"!=typeof t||null===t)throw new TypeError("options argument must be an object");this._workerCode=e.toString(),this._numWorkers=t.maxWorkers>0?Math.min(t.maxWorkers,s):s,this._workers=new Array(this._numWorkers),this._timeout=t.timeout||0,this._terminateOnError=!!t.terminateOnError;var r=t.deps;"string"==typeof r&&(r=[r]),this._terminated=!1,this._working=0,this._waiting=[],this._init(r)}var o=e("./workerTemplate"),s=navigator.hardwareConcurrency||1;i.prototype._init=function(e){for(var t=o.newWorkerURL(this._workerCode),r=0;r<this._numWorkers;r++){var n=new Worker(t);n.postMessage({action:"init",id:r,deps:e}),n.onmessage=this._onmessage.bind(this,n),n.onerror=this._onerror.bind(this,n),n.running=!1,this._workers[r]=n}URL.revokeObjectURL(t)},i.prototype._onerror=function(e,t){this._terminated||(this._working--,e.currentCallback(t),e.running=!1,this._terminateOnError?this.terminate():this._exec())},i.prototype._onmessage=function(e,t){this._terminated||(this._working--,e.currentCallback(null,t.data),e.running=!1,this._exec())},i.prototype._exec=function(){if(this._working!==this._numWorkers&&0!==this._waiting.length)for(var e=0;e<this._numWorkers;e++)if(!this._workers[e].running){var t=this._waiting.shift(),r=this._workers[e];r.postMessage({action:"exec",event:t[0],args:t[1]}),r.running=!0,r.time=Date.now(),r.currentCallback=t[2]||n,this._working++;break}},i.prototype.terminate=function(){if(!this._terminated){for(var e=0;e<this._numWorkers;e++)this._workers[e].terminate();this._terminated=!0}},i.prototype.postAll=function(e,t){if(this._terminated)throw new Error("Cannot post (terminated)");for(var r=0;r<this._numWorkers;r++)this._workers[r].postMessage({action:"exec",event:e,args:t})},i.prototype.post=function(e,t,r){if(this._terminated)throw new Error("Cannot post (terminated)");this._waiting.push([e,t,r]),this._exec()},t.exports=i},{"./workerTemplate":2}],2:[function(e,t,r){"use strict";var n=function(){function e(){this._id=-1,this._listeners={}}self.window=self,e.prototype.on=function(e,t){if(this._listeners[e])throw new RangeError("there is already a listener for "+e);if("function"!=typeof t)throw new TypeError("callback argument must be a function");this._listeners[e]=t},e.prototype.send=function(e){self.postMessage(e)},e.prototype.trigger=function(e,t){if(!this._listeners[e])throw new Error("event "+e+" is not defined");this._listeners[e].apply(null,t)};var t=new e;self.onmessage=function(e){switch(e.data.action){case"init":t._id=e.data.id,e.data.deps&&importScripts.apply(self,e.data.deps);break;case"exec":t.trigger(e.data.event,e.data.args);break;case"ping":t.send("pong")}}},i=n.toString().split('(("CODE"))');r.newWorkerURL=function(e){var t=new Blob(["(",i[0],"(",e,")();",i[1],")();"],{type:"application/javascript"});return URL.createObjectURL(t)}},{}]},{},[1])(1)});
//# sourceMappingURL=worker-manager.min.js.map